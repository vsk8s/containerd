From: Shengjing Zhu <zhsj@debian.org>
Date: Tue, 19 May 2020 17:44:24 +0800
Subject: use gotest.tools v2

---
 cio/io_test.go                              | 4 ++--
 cio/io_unix_test.go                         | 2 +-
 cio/io_windows_test.go                      | 2 +-
 client_ttrpc_test.go                        | 2 +-
 content/helpers_test.go                     | 4 ++--
 content/local/store_test.go                 | 2 +-
 content/testsuite/testsuite.go              | 2 +-
 gc/scheduler/scheduler_test.go              | 2 +-
 log/context_test.go                         | 2 +-
 mount/lookup_linux_test.go                  | 2 +-
 pkg/testutil/helpers_unix.go                | 2 +-
 remotes/docker/fetcher_test.go              | 2 +-
 remotes/docker/scope_test.go                | 4 ++--
 services/server/config/config_test.go       | 2 +-
 services/server/server_test.go              | 4 ++--
 snapshots/benchsuite/benchmark_test.go      | 2 +-
 snapshots/devmapper/config_test.go          | 4 ++--
 snapshots/devmapper/dmsetup/dmsetup_test.go | 4 ++--
 snapshots/devmapper/losetup/losetup_test.go | 4 ++--
 snapshots/devmapper/metadata_test.go        | 4 ++--
 snapshots/devmapper/pool_device_test.go     | 2 +-
 snapshots/devmapper/snapshotter_test.go     | 2 +-
 snapshots/storage/metastore_test.go         | 4 ++--
 snapshots/testsuite/testsuite.go            | 4 ++--
 sys/oom_unix_test.go                        | 4 ++--
 25 files changed, 36 insertions(+), 36 deletions(-)

diff --git a/cio/io_test.go b/cio/io_test.go
index 1ca951c..e42836f 100644
--- a/cio/io_test.go
+++ b/cio/io_test.go
@@ -33,8 +33,8 @@ import (
 
 	"github.com/containerd/fifo"
 	"github.com/google/go-cmp/cmp/cmpopts"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 func assertHasPrefix(t *testing.T, s, prefix string) {
diff --git a/cio/io_unix_test.go b/cio/io_unix_test.go
index 58412d7..fc2cce9 100644
--- a/cio/io_unix_test.go
+++ b/cio/io_unix_test.go
@@ -23,7 +23,7 @@ import (
 	"path/filepath"
 	"testing"
 
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestOpenFifos(t *testing.T) {
diff --git a/cio/io_windows_test.go b/cio/io_windows_test.go
index 92fa1ff..e019148 100644
--- a/cio/io_windows_test.go
+++ b/cio/io_windows_test.go
@@ -21,7 +21,7 @@ package cio
 import (
 	"testing"
 
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestNewFifoSetInDir_NoTerminal(t *testing.T) {
diff --git a/client_ttrpc_test.go b/client_ttrpc_test.go
index 41715d7..94f13e9 100644
--- a/client_ttrpc_test.go
+++ b/client_ttrpc_test.go
@@ -26,7 +26,7 @@ import (
 	"github.com/containerd/containerd/pkg/ttrpcutil"
 	"github.com/containerd/ttrpc"
 	"github.com/gogo/protobuf/types"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestClientTTRPC_New(t *testing.T) {
diff --git a/content/helpers_test.go b/content/helpers_test.go
index 1b4e399..95079a9 100644
--- a/content/helpers_test.go
+++ b/content/helpers_test.go
@@ -26,8 +26,8 @@ import (
 
 	"github.com/containerd/containerd/errdefs"
 	"github.com/opencontainers/go-digest"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 type copySource struct {
diff --git a/content/local/store_test.go b/content/local/store_test.go
index 156fcd1..80cd0d6 100644
--- a/content/local/store_test.go
+++ b/content/local/store_test.go
@@ -40,7 +40,7 @@ import (
 
 	"github.com/opencontainers/go-digest"
 	ocispec "github.com/opencontainers/image-spec/specs-go/v1"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 type memoryLabelStore struct {
diff --git a/content/testsuite/testsuite.go b/content/testsuite/testsuite.go
index 8264f62..3e1a90d 100644
--- a/content/testsuite/testsuite.go
+++ b/content/testsuite/testsuite.go
@@ -36,7 +36,7 @@ import (
 	digest "github.com/opencontainers/go-digest"
 	ocispec "github.com/opencontainers/image-spec/specs-go/v1"
 	"github.com/pkg/errors"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 const (
diff --git a/gc/scheduler/scheduler_test.go b/gc/scheduler/scheduler_test.go
index 3690b78..8027d99 100644
--- a/gc/scheduler/scheduler_test.go
+++ b/gc/scheduler/scheduler_test.go
@@ -23,7 +23,7 @@ import (
 	"time"
 
 	"github.com/containerd/containerd/gc"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestPauseThreshold(t *testing.T) {
diff --git a/log/context_test.go b/log/context_test.go
index 0d9827c..c5da476 100644
--- a/log/context_test.go
+++ b/log/context_test.go
@@ -20,7 +20,7 @@ import (
 	"context"
 	"testing"
 
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestLoggerContext(t *testing.T) {
diff --git a/mount/lookup_linux_test.go b/mount/lookup_linux_test.go
index f2ca5fd..e934756 100644
--- a/mount/lookup_linux_test.go
+++ b/mount/lookup_linux_test.go
@@ -31,7 +31,7 @@ import (
 	// so we use continuity/testutil instead.
 	"github.com/containerd/continuity/testutil"
 	"github.com/containerd/continuity/testutil/loopback"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func checkLookup(t *testing.T, fsType, mntPoint, dir string) {
diff --git a/pkg/testutil/helpers_unix.go b/pkg/testutil/helpers_unix.go
index eee004a..96dd92e 100644
--- a/pkg/testutil/helpers_unix.go
+++ b/pkg/testutil/helpers_unix.go
@@ -24,7 +24,7 @@ import (
 	"testing"
 
 	"github.com/containerd/containerd/mount"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 // Unmount unmounts a given mountPoint and sets t.Error if it fails
diff --git a/remotes/docker/fetcher_test.go b/remotes/docker/fetcher_test.go
index 5930ec6..92a3083 100644
--- a/remotes/docker/fetcher_test.go
+++ b/remotes/docker/fetcher_test.go
@@ -29,7 +29,7 @@ import (
 	"testing"
 
 	"github.com/pkg/errors"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 func TestFetcherOpen(t *testing.T) {
diff --git a/remotes/docker/scope_test.go b/remotes/docker/scope_test.go
index e9995a6..2ec0fee 100644
--- a/remotes/docker/scope_test.go
+++ b/remotes/docker/scope_test.go
@@ -21,8 +21,8 @@ import (
 	"testing"
 
 	"github.com/containerd/containerd/reference"
-	"gotest.tools/v3/assert"
-	"gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	"gotest.tools/assert/cmp"
 )
 
 func TestRepositoryScope(t *testing.T) {
diff --git a/services/server/config/config_test.go b/services/server/config/config_test.go
index 47a12f1..3091abc 100644
--- a/services/server/config/config_test.go
+++ b/services/server/config/config_test.go
@@ -23,7 +23,7 @@ import (
 	"sort"
 	"testing"
 
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 
 	"github.com/containerd/containerd/plugin"
 )
diff --git a/services/server/server_test.go b/services/server/server_test.go
index a7b1a14..8a3b6b8 100644
--- a/services/server/server_test.go
+++ b/services/server/server_test.go
@@ -20,8 +20,8 @@ import (
 	"testing"
 
 	srvconfig "github.com/containerd/containerd/services/server/config"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 func TestCreateTopLevelDirectoriesErrorsWithSamePathForRootAndState(t *testing.T) {
diff --git a/snapshots/benchsuite/benchmark_test.go b/snapshots/benchsuite/benchmark_test.go
index 40514d5..05e3a18 100644
--- a/snapshots/benchsuite/benchmark_test.go
+++ b/snapshots/benchsuite/benchmark_test.go
@@ -32,7 +32,7 @@ import (
 	"github.com/containerd/continuity/fs/fstest"
 	"github.com/pkg/errors"
 	"github.com/sirupsen/logrus"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 
 	"github.com/containerd/containerd/mount"
 	"github.com/containerd/containerd/snapshots"
diff --git a/snapshots/devmapper/config_test.go b/snapshots/devmapper/config_test.go
index bae0ed6..b6b9cde 100644
--- a/snapshots/devmapper/config_test.go
+++ b/snapshots/devmapper/config_test.go
@@ -25,8 +25,8 @@ import (
 
 	"github.com/BurntSushi/toml"
 	"github.com/hashicorp/go-multierror"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 func TestLoadConfig(t *testing.T) {
diff --git a/snapshots/devmapper/dmsetup/dmsetup_test.go b/snapshots/devmapper/dmsetup/dmsetup_test.go
index 3b4c688..97fdeb9 100644
--- a/snapshots/devmapper/dmsetup/dmsetup_test.go
+++ b/snapshots/devmapper/dmsetup/dmsetup_test.go
@@ -26,8 +26,8 @@ import (
 
 	"github.com/docker/go-units"
 	"golang.org/x/sys/unix"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 
 	"github.com/containerd/containerd/pkg/testutil"
 	"github.com/containerd/containerd/snapshots/devmapper/losetup"
diff --git a/snapshots/devmapper/losetup/losetup_test.go b/snapshots/devmapper/losetup/losetup_test.go
index b6d2d5e..773ee59 100644
--- a/snapshots/devmapper/losetup/losetup_test.go
+++ b/snapshots/devmapper/losetup/losetup_test.go
@@ -25,8 +25,8 @@ import (
 
 	"github.com/docker/go-units"
 	"golang.org/x/sys/unix"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 
 	"github.com/containerd/containerd/pkg/testutil"
 )
diff --git a/snapshots/devmapper/metadata_test.go b/snapshots/devmapper/metadata_test.go
index 0489a68..84ea290 100644
--- a/snapshots/devmapper/metadata_test.go
+++ b/snapshots/devmapper/metadata_test.go
@@ -28,8 +28,8 @@ import (
 
 	"github.com/pkg/errors"
 	"go.etcd.io/bbolt"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 var (
diff --git a/snapshots/devmapper/pool_device_test.go b/snapshots/devmapper/pool_device_test.go
index 7ee7301..49eef40 100644
--- a/snapshots/devmapper/pool_device_test.go
+++ b/snapshots/devmapper/pool_device_test.go
@@ -34,7 +34,7 @@ import (
 	"github.com/containerd/containerd/snapshots/devmapper/losetup"
 	"github.com/docker/go-units"
 	"github.com/sirupsen/logrus"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 )
 
 const (
diff --git a/snapshots/devmapper/snapshotter_test.go b/snapshots/devmapper/snapshotter_test.go
index 5157be8..1ecde05 100644
--- a/snapshots/devmapper/snapshotter_test.go
+++ b/snapshots/devmapper/snapshotter_test.go
@@ -30,7 +30,7 @@ import (
 	"github.com/containerd/continuity/fs/fstest"
 	"github.com/hashicorp/go-multierror"
 	"github.com/sirupsen/logrus"
-	"gotest.tools/v3/assert"
+	"gotest.tools/assert"
 
 	"github.com/containerd/containerd/mount"
 	"github.com/containerd/containerd/namespaces"
diff --git a/snapshots/storage/metastore_test.go b/snapshots/storage/metastore_test.go
index 90ed2ae..a2b7e4c 100644
--- a/snapshots/storage/metastore_test.go
+++ b/snapshots/storage/metastore_test.go
@@ -28,8 +28,8 @@ import (
 	"github.com/containerd/containerd/snapshots"
 	"github.com/google/go-cmp/cmp"
 	"github.com/pkg/errors"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 type testFunc func(context.Context, *testing.T, *MetaStore)
diff --git a/snapshots/testsuite/testsuite.go b/snapshots/testsuite/testsuite.go
index b243402..c5af695 100644
--- a/snapshots/testsuite/testsuite.go
+++ b/snapshots/testsuite/testsuite.go
@@ -34,8 +34,8 @@ import (
 	"github.com/containerd/containerd/pkg/testutil"
 	"github.com/containerd/containerd/snapshots"
 	"github.com/containerd/continuity/fs/fstest"
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 // SnapshotterFunc is used in SnapshotterSuite
diff --git a/sys/oom_unix_test.go b/sys/oom_unix_test.go
index dee5f81..f849c64 100644
--- a/sys/oom_unix_test.go
+++ b/sys/oom_unix_test.go
@@ -25,8 +25,8 @@ import (
 	"testing"
 	"time"
 
-	"gotest.tools/v3/assert"
-	is "gotest.tools/v3/assert/cmp"
+	"gotest.tools/assert"
+	is "gotest.tools/assert/cmp"
 )
 
 func TestSetPositiveOomScoreAdjustment(t *testing.T) {
